generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ENUMS
enum TimeRange {
  MAÃ‘ANA
  TARDE
  NOCHE

  @@map("time_range")
}

enum Period {
  DIARIO
  SEMANAL
  MENSUAL

  @@map("period")
}

// TABLAS
model Category {
  id            String        @id @default(uuid())
  name          String        @unique
  subcategories Subcategory[]

  @@map("categories")
}

model Subcategory {
  id         String     @id @default(uuid())
  name       String     @unique
  categoryId String     @map("category_id")
  category   Category   @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  activities Activity[]

  @@map("subcategories")
}

model Unit {
  id         String     @id @default(uuid())
  name       String     @unique
  activities Activity[]
  Goal       Goal[]

  @@map("units")
}

model Activity {
  id            String      @id @default(uuid())
  title         String
  description   String
  timeRange     TimeRange
  time          String
  unitId        String
  subcategoryId String

  goal          Goal[]
  subcategory   Subcategory @relation(fields: [subcategoryId], references: [id], onDelete: Cascade)
  Unit          Unit       @relation(fields: [unitId], references: [id])

  @@map("activities")
}

model Goal {
  id         String   @id @default(uuid())
  period     Period
  value      Int
  unitId     String
  activityId String   @map("activity_id")

  unit       Unit     @relation(fields: [unitId], references: [id])
  activity   Activity @relation(fields: [activityId], references: [id], onDelete: Cascade)

  @@map("goals")
}
